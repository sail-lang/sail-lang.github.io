<html>
<head>
   <meta charset="UTF-8">
   <title>Sail -  Simple Api Interaction Language</title>
   <meta name="description" content="Sail is a hypermedia language for APIs">
   <meta name="keywords" content="Hypermedia,API,JSON">
   <link rel="stylesheet" type="text/css" href="resources/style.css">
</head>
<body>

 <header>
    <div class="header">
    </div>
 </header>

 <section class="main">
    <h1>Sail</h1>
    <img src="resources/icon.png"/>
    <h2>Simple Api Interaction Language</h2>  
 </section>

 <section class="summary">
   <h2>Introduction</h2>
   <p>Sail (Simple Api Interaction Language) is a hypermedia language that aims to simplify the interaction with APIs. When simplifying the interaction, clients are less coupled and changes can be absorbed a bit easier. 
   </p>
   <p> There are basically two types of coupling between a client and an API: data and communication. Data coupling is related to the data structure of the API responses and communication coupling is associated to the protocol used for requesting things to the API. Changes on the data sctucture as well as the proctocol will affect any client.  
   </p>
   <p>Decoupling a client from the data structure is highly difficult, if not impossible. Any attempt to generalize or standardize data structure could make things unnecessarily complex or lose alignment with the business domain. Instead, Sail focuses on simplifying the mechanism to request things to APIs either for getting information or triggering actions, in order to decupling the client as much as possible. For that matter, it uses primarily the hypermedia controls link and form.
   </p>

 </section>

 <section id="format" class="summary">
   <h2>The format</h2>
   <p>Sail uses a JSON based format where anything that belongs to the language is marked with a <strong>#</strong> and it defines a media type <strong>application/vnd.sail+json</strong>
   </p>
   <div class="siblings json">
     <pre>
 { 
  <span class="field">"#links"</span>: {}
 }
    </pre>
    <pre>
   {
    <span class="field">"#forms"</span>: {}
   }
    </pre>
    <pre>
   {
    <span class="field">"#meta"</span>: {}
   }
     </pre>
   </div>
 <p><strong>#links</strong> and <strong>#forms</strong> sections can be specified in any part of the response and several times, whereas <strong>#meta</strong> can be specified only once at the root of the json response. <a href="./format.html">More</a> 
 </section>

 <section id="links" class="summary">
   <h2>Links</h2>
   <p>By locating a link and following it, the client doesn't need to worry about protocol specifics (HTTP verb, query parameters, etc). All links must be in a <strong>#links</strong> section and at least the fields href and rel must be specified. The rel field is for locating the link and the href holds the action. This could be an URL or an expression for accessing local information without calling a backend. <a href="./links.html"> More</a></p>
   <div class="siblings json">
     <pre>
 <span class="field">"#links"</span>: {
    <span class="field">"reviews"</span>: {
        <span class="field">"href"</span>:<span class="string">"http://api.com/products/1/reviews"</span>,
        <span class="field">"rel"</span>:<span class="string">"reviews"</span>
       }          
   }
     </pre>
     <pre>
   GET http://api.com/products/1/reviews
     </pre>
   <div>

  <div class="siblings json">
     <pre>
 <span class="field">"#links"</span>: {
    <span class="field">"airline"</span>: {
        <span class="field">"href"</span>:<span class="string">"sailpath://$.airlines.ux"</span>,
        <span class="field">"rel"</span>:<span class="string">"airline"</span>
       }          
   }
     </pre>
       <pre>
          {  ...
             
           <span class="field">"airlines"</span>: {
               <span class="field">"ux"</span>: {

               }
            }          
          }
       </pre>
   <div>
 </section>

 <section id="forms" class="summary">
   <h2>Forms</h2>
   <p>Forms are the mechanism for decoupling actions like creation, modification or deletion. When using forms the client doesn't need to cope with URLs, HTTP verbs and even in some cases with bodies. By default forms submmit a JSON body, but other body formats can be specified. All forms must be specified in a <strong>#form</strong> section. <a href="./forms.html"> More </a></p>
   <div class="siblings json">
     <pre>
  <span class="field">"#forms"</span>: {
      <span class="field">"add"</span>:{
         <span class="field">"id"</span>:<span class="string">"add"</span>,
         <span class="field">"action"</span>:<span class="string">"http://api.com/cities"</span>,
         <span class="field">"method"</span>:<span class="string">"POST"</span>,
         <span class="field">"inputs"</span>: [
               {
                <span class="field">"name"</span>:<span class="string">"name"</span>,
                <span class="field">"value"</span>:
               },
               {
                <span class="field">"name"</span>:<span class="string">"coordinate.latitude"</span>,
                <span class="field">"value"</span>:
               },
               {
                <span class="field">"name"</span>:<span class="string">"coordinate.longitude"</span>,
                <span class="field">"value"</span>:
               }
            ]
        }          
     }
     </pre>
     <pre>
        POST http://api.com/cities

	{
         <span class="field">"name"</span>:<span class="string">"A city"</span>,
         <span class="field">"coordinate"</span>: {
           <span class="field">"latitude"</span>:<span class="string">-34.9204529</span>,
           <span class="field">"longitude"</span>:<span class="string">-57.9882757</span>
           }
        }
     </pre>
   <div>  
 </section>

 <section id="headers" class="summary">
   <h2>Headers</h2>
   <p>It is common to include headers as part of the API protocol. Lets say it is required to track all requests asociated to a specific user. Some APIs define a custom header where a transaction id must be specified in each request. In this case the client must know which header to send generating certain coupling. In Sail, a header section with pre-set values can be specifiead in links and forms so the client doesn't need to handle them.   <a href="./headers.html"> More </a></p>
   <div class="siblings json">
     <pre>
 <span class="field">"#links"</span>: {
    <span class="field">"reviews"</span>:{
        <span class="field">"href"</span>:<span class="string">"http://api.com/products/1/reviews"</span>,
        <span class="field">"rel"</span>:<span class="string">"reviews"</span>,
        <span class="field">"headers"</span>[
              {
               <span class="field">"name"</span>:<span class="string">"X-TID"</span>
               <span class="field">"value"</span>:<span class="string">"3d3424ed"</span>
              }
         ]
       }          
   }
     </pre>
     <pre>
   GET http://api.com/products/1/reviews
   X-TID:3d3424ed
     </pre>  
   <div>  
   <div class="siblings json">
 <pre>
  <span class="field">"#forms"</span>: {
    <span class="field">"add"</span>:{
       <span class="field">"id"</span>:<span class="string">"add"</span>,
       <span class="field">"action"</span>:<span class="string">"http://api.com/products"</span>,
       <span class="field">"method"</span>:<span class="string">"POST"</span>,
       <span class="field">"headers"</span>:[
              {
               <span class="field">"name"</span>:<span class="string">"X-TID"</span>
               <span class="field">"value"</span>:<span class="string">"3d3424ed"</span>
              }
         ],
       <span class="field">"inputs"</span>: [
              ...
         ]
      }          
     }
     </pre>
     <pre>
        POST http://api.com/products
        X-TID:3d3424ed
        {
          ...
        }
     </pre>
   </div>
 </section>

<section id="meta" class="summary">
   <h2>Meta</h2>
   <p>The meta section is used for adding any metada the API wants to publish. For now it's a bit experimental and Sail only defines the field #headers which means any request that departs from the current response must have the specified headers. <a href="./meta.html"> More </a></p>
   <div class="siblings json">
     <pre>
 <span class="field">"#meta"</span>:{
        <span class="field">"#headers"</span>:[
               <span class="field">"X-TID"</span>:<span class="string">"3d3424ed"</span>
         ]
    },
 <span class="field">"#links"</span>: {
    <span class="field">"reviews"</span>:{
        <span class="field">"href"</span>:<span class="string">"http://api.com/products/1/reviews"</span>,
        <span class="field">"rel"</span>:<span class="string">"reviews"</span>
       }          
   }
     </pre>
     <pre>
   GET http://api.com/products/1/reviews
   X-TID:3d3424ed
     </pre>
   <div>
 </section>
</body>
</html>
